<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:NIS.Desktop.ViewModels"
             xmlns:loc="using:NIS.Desktop.Localization"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="600" d:DesignHeight="400"
             x:Class="NIS.Desktop.Views.ImportExportView"
             x:DataType="vm:ImportExportViewModel">

    <Design.DataContext>
        <vm:ImportExportViewModel/>
    </Design.DataContext>

    <Grid RowDefinitions="*,Auto">
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel Margin="40,30" Spacing="24" MaxWidth="600" HorizontalAlignment="Center">

                <!-- Project Import/Export -->
                <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                        CornerRadius="4" Padding="20">
                    <StackPanel Spacing="12">
                        <TextBlock Text="{Binding Project, Source={x:Static loc:Strings.Instance}}"
                                   FontSize="16" FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding ProjectImportExportDesc, Source={x:Static loc:Strings.Instance}}"
                                   FontSize="13" Opacity="0.7" TextWrapping="Wrap"/>

                        <!-- Project Selector for Export -->
                        <ComboBox ItemsSource="{Binding ProjectList}"
                                  SelectedItem="{Binding SelectedProject}"
                                  HorizontalAlignment="Stretch"
                                  Margin="0,8,0,0">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding DisplayName}"/>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>

                        <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,8,0,0">
                            <Button Command="{Binding ExportProjectCommand}"
                                    Content="{Binding ExportProject, Source={x:Static loc:Strings.Instance}}"
                                    Classes="accent"
                                    Padding="16,8"/>
                            <Button Command="{Binding ImportProjectCommand}"
                                    Content="{Binding ImportProject, Source={x:Static loc:Strings.Instance}}"
                                    Padding="16,8"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- User Data Export/Import -->
                <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                        CornerRadius="4" Padding="20">
                    <StackPanel Spacing="12">
                        <TextBlock Text="{Binding UserData, Source={x:Static loc:Strings.Instance}}"
                                   FontSize="16" FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding ExportUserDataDesc, Source={x:Static loc:Strings.Instance}}"
                                   FontSize="13" Opacity="0.7" TextWrapping="Wrap"/>
                        <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,8,0,0">
                            <Button Command="{Binding ExportUserDataCommand}"
                                    Content="{Binding ExportUserData, Source={x:Static loc:Strings.Instance}}"
                                    Classes="accent"
                                    Padding="16,8"/>
                            <Button Command="{Binding ImportUserDataCommand}"
                                    Content="{Binding ImportUserData, Source={x:Static loc:Strings.Instance}}"
                                    Padding="16,8"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Factory Data Export/Import -->
                <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                        CornerRadius="4" Padding="20">
                    <StackPanel Spacing="12">
                        <TextBlock Text="{Binding FactoryData, Source={x:Static loc:Strings.Instance}}"
                                   FontSize="16" FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding ExportFactoryDataDesc, Source={x:Static loc:Strings.Instance}}"
                                   FontSize="13" Opacity="0.7" TextWrapping="Wrap"/>
                        <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,8,0,0">
                            <Button Command="{Binding ExportFactoryDataCommand}"
                                    Content="{Binding ExportFactoryData, Source={x:Static loc:Strings.Instance}}"
                                    Classes="accent"
                                    Padding="16,8"/>
                            <Button Command="{Binding ImportFactoryDataCommand}"
                                    Content="{Binding ImportFactoryData, Source={x:Static loc:Strings.Instance}}"
                                    Padding="16,8"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Status Message -->
                <TextBlock Text="{Binding StatusMessage}"
                           FontSize="13" Opacity="0.8"
                           HorizontalAlignment="Center"
                           IsVisible="{Binding StatusMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>

            </StackPanel>
        </ScrollViewer>

        <!-- Footer -->
        <Border Grid.Row="1" Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" Padding="20,12">
            <TextBlock Text="{Binding NisvCompliance, Source={x:Static loc:Strings.Instance}}"
                       FontSize="12" Opacity="0.5" HorizontalAlignment="Center"/>
        </Border>
    </Grid>
</UserControl>
