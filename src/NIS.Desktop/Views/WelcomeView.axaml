<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:NIS.Desktop.ViewModels"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="650" d:DesignHeight="550"
             x:Class="NIS.Desktop.Views.WelcomeView"
             x:DataType="vm:WelcomeViewModel">

    <Design.DataContext>
        <vm:WelcomeViewModel/>
    </Design.DataContext>

    <UserControl.Resources>
        <vm:EqualsConverter x:Key="EqualsConverter"/>
    </UserControl.Resources>

    <Grid RowDefinitions="Auto,*,Auto">
        <!-- Header -->
        <Border Grid.Row="0" Background="{DynamicResource HeaderPrimaryBrush}" Padding="30,25">
            <StackPanel HorizontalAlignment="Center">
                <TextBlock Text="{Binding Strings.AppTitle}"
                           FontSize="28" FontWeight="Bold"
                           Foreground="{DynamicResource HeaderForegroundBrush}"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="{Binding Strings.AppSubtitle}"
                           FontSize="14"
                           Foreground="{DynamicResource HeaderSubtitleBrush}"
                           Margin="0,5,0,0"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <StackPanel Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="30" Margin="40">

            <!-- Language & Theme Selection -->
            <StackPanel Spacing="15">
                <TextBlock Text="{Binding Strings.SelectLanguage}"
                           FontSize="16" FontWeight="SemiBold"
                           HorizontalAlignment="Center"/>

                <!-- Language names stay in their native language -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="8">
                    <ToggleButton Content="Deutsch"
                                  IsChecked="{Binding SelectedLanguage, Converter={StaticResource EqualsConverter}, ConverterParameter=de}"
                                  Command="{Binding SelectLanguageCommand}"
                                  CommandParameter="de"
                                  Padding="18,10" FontSize="14"/>

                    <ToggleButton Content="FranÃ§ais"
                                  IsChecked="{Binding SelectedLanguage, Converter={StaticResource EqualsConverter}, ConverterParameter=fr}"
                                  Command="{Binding SelectLanguageCommand}"
                                  CommandParameter="fr"
                                  Padding="18,10" FontSize="14"/>

                    <ToggleButton Content="Italiano"
                                  IsChecked="{Binding SelectedLanguage, Converter={StaticResource EqualsConverter}, ConverterParameter=it}"
                                  Command="{Binding SelectLanguageCommand}"
                                  CommandParameter="it"
                                  Padding="18,10" FontSize="14"/>

                    <ToggleButton Content="English"
                                  IsChecked="{Binding SelectedLanguage, Converter={StaticResource EqualsConverter}, ConverterParameter=en}"
                                  Command="{Binding SelectLanguageCommand}"
                                  CommandParameter="en"
                                  Padding="18,10" FontSize="14"/>
                </StackPanel>

                <!-- Dark Mode Toggle -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="10" Margin="0,10,0,0">
                    <TextBlock Text="{Binding Strings.Theme}" VerticalAlignment="Center"/>
                    <ToggleSwitch IsChecked="{Binding IsDarkMode}"
                                  OnContent="{Binding Strings.ThemeDark}"
                                  OffContent="{Binding Strings.ThemeLight}"/>
                </StackPanel>
            </StackPanel>

            <!-- Action Buttons -->
            <StackPanel Spacing="12" Width="300">
                <!-- Current Project Button (only visible when a project is loaded) -->
                <Button Command="{Binding ContinueProjectCommand}"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        Background="{DynamicResource WarningButtonBrush}"
                        Foreground="{DynamicResource HeaderForegroundBrush}"
                        Padding="20,15"
                        FontSize="16"
                        IsVisible="{Binding HasCurrentProject}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <TextBlock Text="ðŸ“‹" FontSize="16"/>
                        <TextBlock Text="{Binding CurrentProjectName}" FontWeight="SemiBold"/>
                    </StackPanel>
                </Button>

                <Button Content="{Binding Strings.NewProject}"
                        Command="{Binding NewProjectCommand}"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        Background="{DynamicResource SuccessButtonBrush}"
                        Foreground="{DynamicResource HeaderForegroundBrush}"
                        Padding="20,15"
                        FontSize="16"/>

                <Button Content="{Binding Strings.OpenProject}"
                        Command="{Binding OpenProjectCommand}"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        Background="{DynamicResource PrimaryButtonBrush}"
                        Foreground="{DynamicResource HeaderForegroundBrush}"
                        Padding="20,15"
                        FontSize="16"/>
            </StackPanel>
        </StackPanel>

        <!-- Footer -->
        <Border Grid.Row="2" Background="{DynamicResource PanelBackgroundBrush}" Padding="15,10">
            <TextBlock Text="{Binding Strings.NisvCompliance}"
                       HorizontalAlignment="Center"
                       Foreground="{DynamicResource SubtleTextBrush}"/>
        </Border>
    </Grid>
</UserControl>
